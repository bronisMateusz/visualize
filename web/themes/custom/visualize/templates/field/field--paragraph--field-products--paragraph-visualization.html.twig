{% set product_gallery_class = 'products-gallery' %}

{% set products_images_class = product_gallery_class ~ '__images' %}

{% set products_details_class = product_gallery_class ~ '__details' %}

{% if label_hidden %}
	<div {{ attributes.addClass(product_gallery_class) }}>
		<div class={{ products_images_class }}>
			{% for item in items %}
				<div class='product-image__wrapper'>
					{% set product_classes = 'product-image' %}

					{% if loop.index == 1 %}
						{% set product_classes = product_classes ~ '__active' %}
					{% endif %}

					{% set field_media_image = item.content['#paragraph'].field_product_photo.entity.field_media_image %}
					{{ drupal_image(field_media_image.entity.id,'', { alt: field_media_image.alt | t, class: product_classes }) }}
				</div>
			{% endfor %}
		</div>

		<div class={{ products_details_class }}>
			{% for item in items %}
				{% set product_name_class = 'product-name' %}
				{% set product_description_class = 'product-description' %}

				{% if loop.index == 1 %}
					{% set product_name_class = product_name_class ~ '__active' %}
					{% set product_description_class = product_description_class ~ '__active' %}
				{% endif %}

				{% set field_product_name = item.content['#paragraph'].field_product_name.value %}
				<h2 class={{ product_name_class }}>
					{{ field_product_name }}
				</h2>

				{% set field_product_description = item.content['#paragraph'].field_product_description.value %}
				<div class={{ product_description_class }}>
					{{ field_product_description | raw }}
				</div>
			{% endfor %}
		</div>

	</div>
{% else %}
	<div {{ attributes.addClass(product_gallery_class) }}>
		{%
			set title_classes = [
				'field__label',
				label_display == 'visually_hidden' ? 'visually-hidden',
			]
		%}

		<div{{title_attributes.addClass(title_classes)}}>{{ label }}</div>
		<div class={{ products_images_class }}>
			{% for item in items %}
				{% set product_classes = 'product-image' %}

				{% if loop.index == 1 %}
					{% set product_classes = product_classes ~ '__active' %}
				{% endif %}

				{% set field_media_image = item.content['#paragraph'].field_product_photo.entity.field_media_image %}
				{{ drupal_image(field_media_image.entity.id,'', { alt: field_media_image.alt | t, class: product_classes }) }}

			{% endfor %}
		</div>

		<div class={{ products_names_classes }}>
			{% for item in items %}
				{% set product_classes = 'product-name' %}

				{% if loop.index == 1 %}
					{% set product_classes = product_classes ~ '__active' %}
				{% endif %}

				{% set field_product_name = item.content['#paragraph'].field_product_name.value %}
				<h2 class={{ product_classes }}>
					{{ field_product_name }}
				</h2>
			{% endfor %}
		</div>

		<div class={{ products_descriptions_classes }}>
			{% for item in items %}
				{% set product_classes = 'product-description' %}

				{% if loop.index == 1 %}
					{% set product_classes = product_classes ~ '__active' %}
				{% endif %}

				{% set field_product_description = item.content['#paragraph'].field_product_description.value %}
				<div class={{ product_classes }}>
					{{ field_product_description | raw }}
				</div>
			{% endfor %}
		</div>

	</div>
{% endif %}
